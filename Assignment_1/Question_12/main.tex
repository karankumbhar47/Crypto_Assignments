%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \setmathfont{TeX Gyre Termes Math}
%Packages
\documentclass[10pt, a4paper]{article}
\usepackage[top=3cm, bottom=4cm, left=2cm, right=2cm]{geometry}
\usepackage{amsmath,amsthm,amsfonts,amssymb,amscd, fancyhdr, color, comment, graphicx, environ}
\usepackage{float}
\usepackage{booktabs}
\usepackage{pifont}
\usepackage{mathrsfs}
\usepackage[math-style=ISO]{unicode-math}
\usepackage{lastpage}
\usepackage[dvipsnames]{xcolor}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{enumerate}
\usepackage[shortlabels]{enumitem}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{listings}
\usepackage{sectsty}
\usepackage{thmtools}
\usepackage{shadethm}
\usepackage{hyperref}
\usepackage{setspace}
\usepackage{adjustbox}
\usepackage{tcolorbox}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
}
\usepackage{xcolor,colortbl}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtcolorbox[auto counter, number within=section]{outputbox}[2][]{colback=blue!5!white, colframe=blue!75!black, title=Output \thetcbcounter: #2,#1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Environment setup
\mdfsetup{skipabove=\topskip,skipbelow=\topskip}
\newrobustcmd\ExampleText{%
An \textit{inhomogeneous linear} differential equation has the form
\begin{align}
L[v ] = f,
\end{align}
where $L$ is a linear differential operator, $v$ is the dependent
variable, and $f$ is a given nonâˆ’zero function of the independent
variables alone.
}
\mdfdefinestyle{theoremstyle}{%
linecolor=black,linewidth=1pt,%
frametitlerule=true,%
frametitlebackgroundcolor=gray!20,
innertopmargin=\topskip,
}
\mdtheorem[style=theoremstyle]{Problem}{Question Number}
\setcounter{Problem}{11}
\newenvironment{Solution}{\textbf{Solution.}}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Define a custom tcolorbox environment for output blocks

% Define a custom command for server and client output
\newcommand{\showoutput}[2]{
  \begin{outputbox}{#1}
    \begin{itemize}
      \item \textbf{Server}
        \begin{itemize}
          \item #2[server]
        \end{itemize}
      \item \textbf{Client}
        \begin{itemize}
          \item #2[client]
        \end{itemize}
    \end{itemize}
  \end{outputbox}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Fill in the appropriate information below
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}     
\newcommand\course{XXXX0000}                            % <-- course name   
\newcommand\hwnumber{0}                                 % <-- homework number
\newcommand\Information{Someone}                        % <-- personal information
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Page setup
\pagestyle{fancy}
\headheight 35pt
\lhead{\today \hspace*{4cm} Key-Breakers}
\rhead{\includegraphics[width=1.2cm]{../logo.png}}
\lfoot{}
\pagenumbering{arabic}
\cfoot{\small\thepage}
\rfoot{}
\headsep 1.2em
\renewcommand{\baselinestretch}{1.25}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Add new commands here
\renewcommand{\labelenumi}{\alph{enumi})}
\newcommand{\Z}{\mathbb Z}
\newcommand{\R}{\mathbb R}
\newcommand{\Q}{\mathbb Q}
\newcommand{\NN}{\mathbb N}
\newcommand{\PP}{\mathbb P}
\DeclareMathOperator{\Mod}{Mod} 
\renewcommand\lstlistingname{Algorithm}
\renewcommand\lstlistlistingname{Algorithms}
\def\lstlistingautorefname{Alg.}
\newtheorem*{theorem}{Theorem}
\newtheorem*{lemma}{Lemma}
\newtheorem{case}{Case}
\newcommand{\assign}{:=}
\newcommand{\infixiff}{\text{ iff }}
\newcommand{\nobracket}{}
\newcommand{\backassign}{=:}
\newcommand{\tmmathbf}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\tmop}[1]{\ensuremath{\operatorname{#1}}}
\newcommand{\tmtextbf}[1]{\text{{\bfseries{#1}}}}
\newcommand{\tmtextit}[1]{\text{{\itshape{#1}}}}

\newenvironment{itemizedot}{
    \begin{itemize} 
    \renewcommand{\labelitemi}{$\bullet$}
    \renewcommand{\labelitemii}{$\bullet$}
    \renewcommand{\labelitemiii}{$\bullet$}
    \renewcommand{\labelitemiv}{$\bullet$}}
    {\end{itemize}}

\catcode`\<=\active\def<{
\fontencoding{T1}\selectfont\symbol{60}\fontencoding{\encodingdefault}}
\catcode`\>=\active\def>{
\fontencoding{T1}\selectfont\symbol{62}\fontencoding{\encodingdefault}}
\catcode`\<=\active\def<{
\fontencoding{T1}\selectfont\symbol{60}\fontencoding{\encodingdefault}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Begin now!



\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Start the assignment now
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%New problem
\newpage
\begin{Problem}
    \textbf{TLS 1.3}

    As shown in CIA-1, using the openssl dumps with a local client-server compare and contrast
    TLS 1.2 and TLS 1.3. Submit all necessary files and a script to verify your approach.

    Now write a note in your notebook highlighting how TLS 1.3 improves upon TLS 1.2.

\end{Problem}

\begin{Solution}
    \subsection*{Setup}
        \begin{itemize}
            \item Create private key and certificate by following the instruction mentioned in 
            \texttt{CreateKey.md} file 
            \item Run the Server and Client in differnet terminals for \texttt{TLS1.2} and 
            \texttt{TLS1.3} by following instruction in \texttt{handshake.md} file
            \item Observe the output dumped in terminal  
            \item Instead doing of all these instruction run  script file \texttt{run.sh} following instruction
             from \texttt{README.md} file and observer the output which is dumped in 4 different spawn gnome-terminal.
        \end{itemize}


    \subsection*{Comparison of TLS 1.2 and TLS 1.3 Using OpenSSL}
    \subsubsection*{1. Cipher Suites}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item \textbf{Output}
                        \begin{itemize}
                            \item Server $\rightarrow$
                                  Shared ciphers:ECDHE-ECDSA-AES256-GCM-...
                            \item Client $\rightarrow$
                                  Cipher: ECDHE-RSA-AES256-GCM-SHA384

                        \end{itemize}
                  \item Offers a broad range of cipher suites, including \texttt{ECDHE-ECDSA-AES256-GCM-SHA384}, \\
                        \texttt{ECDHE-RSA-AES256-GCM-SHA384}, and \texttt{DHE-RSA-AES256-GCM-SHA384}, among others.
                  \item The cipher suite used in this session is \texttt{ECDHE-RSA-AES256-GCM-SHA384}.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Simplifies the cipher suites by reducing the number of options, focusing on stronger and more secure \\
                        algorithms. The shared cipher suites are \texttt{TLS\_AES\_256\_GCM\_SHA384}, \texttt{TLS\_CHACHA20\_POLY1305\_SHA256}, \\
                        and \texttt{TLS\_AES\_128\_GCM\_SHA256}.
                  \item The cipher suite used in this session is \texttt{TLS\_AES\_256\_GCM\_SHA384}.
              \end{itemize}
            
    \end{itemize}

    \subsubsection*{2. Handshake Process}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item The handshake process is more complex and involves multiple round-trips between the client and server.
                  \item Uses different key exchange mechanisms, including ECDHE and DHE.
                  \item The session output indicates that the server supports secure renegotiation.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Simplifies the handshake process by reducing it to one round-trip (1-RTT), improving performance and security.
                  \item Eliminates support for certain older cryptographic algorithms, focusing on a smaller set of secure options.
                  \item Like TLS 1.2, the session indicates support for secure renegotiation, but TLS 1.3 inherently avoids the pitfalls of renegotiation attacks by streamlining the process.
              \end{itemize}
    \end{itemize}

    \subsubsection*{3. Supported Groups and Algorithms}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item Supports a wide variety of elliptic curve groups (\texttt{x25519}, \texttt{secp256r1}, \texttt{x448}, etc.) and signature algorithms.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Expands support for Diffie-Hellman groups (\texttt{ffdhe2048}, \texttt{ffdhe3072}, etc.), reflecting a shift toward more modern and secure cryptographic primitives.
                  \item Continues support for elliptic curve groups but omits older, less secure options.
              \end{itemize}
    \end{itemize}

    \subsubsection*{4. Security Enhancements}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item Offers optional support for forward secrecy if specific cipher suites (like ECDHE) are used.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Enforces forward secrecy by default, as all cipher suites supported by TLS 1.3 are forward secure.
                  \item Removes support for older, less secure features like RSA key exchange and static DH, further enhancing security.
              \end{itemize}
    \end{itemize}

    \subsubsection*{5. Session Resumption}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item Relies on session tickets and session IDs for session resumption, which involves some risks like ticket reuse.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Uses session tickets in a more secure manner and introduces Pre-Shared Key (PSK) modes for session resumption, reducing the chance of ticket reuse attacks.
              \end{itemize}
    \end{itemize}

    \subsubsection*{6. Signature Algorithms}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item Supports a wide range of signature algorithms, including RSA, DSA, and ECDSA, with different hash functions (e.g., SHA256, SHA384).
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Consolidates the list of supported signature algorithms, focusing on those that are more secure, such as RSA-PSS and ECDSA, and removing support for older, weaker algorithms.
              \end{itemize}
    \end{itemize}

    \subsubsection*{7. Backward Compatibility and Transition}

    \begin{itemize}[leftmargin=0.5in]
        \item \textbf{TLS 1.2:}
              \begin{itemize}
                  \item Remains widely used and is necessary for compatibility with legacy systems and clients that do not support TLS 1.3.
              \end{itemize}

        \item \textbf{TLS 1.3:}
              \begin{itemize}
                  \item Designed to be more secure and efficient, though its adoption requires updates to client and server implementations. It is backward compatible with TLS 1.2 but offers a clear advantage in terms of security and performance.
              \end{itemize}
    \end{itemize}

    \subsubsection*{8. Certificate and Verification}

    \begin{itemize}[leftmargin=0.5in]
        \item Both TLS 1.2 and TLS 1.3 rely on the same certificate infrastructure. However, the outputs provided indicate a self-signed certificate being used, leading to verification errors in both cases (\texttt{verify return:1}, \texttt{Verify return code: 18}).
    \end{itemize}

    \subsubsection*{Conclusion}

    TLS 1.3 offers significant improvements over TLS 1.2 in terms of security, performance, and simplicity. By reducing the number of cipher suites, streamlining the handshake process, and enforcing forward secrecy by default, TLS 1.3 addresses many of the shortcomings of TLS 1.2. However, TLS 1.2 remains essential for backward compatibility with systems that have not yet upgraded to support TLS 1.3.\\


\textbf{Note that ``how TLS 1.3 improves upon TLS 1.2." is written in Notebook.}
\end{Solution}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Complete the assignment now
\end{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%